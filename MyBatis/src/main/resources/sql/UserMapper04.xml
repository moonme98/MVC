<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="UserMapper04">

    <!-- 1. addUser01 : jdbcType을 반드시 지정 -->
    <insert id="addUser01" parameterType="mybatis.service.domain.User">
        INSERT INTO users (user_id, user_name, password, age, grade, reg_date)
        VALUES (
            #{userId},
            #{userName},
            #{password},
            #{age,jdbcType=INTEGER},
            #{grade,jdbcType=NUMERIC},
            #{regDate,jdbcType=DATE}
        )
    </insert>

    <!-- 2. addUser02 : 동일하게 jdbcType 지정 -->
    <insert id="addUser02" parameterType="mybatis.service.domain.User">
        INSERT INTO users (user_id, user_name, password, age, grade, reg_date)
        VALUES (
            #{userId},
            #{userName},
            #{password},
            #{age,jdbcType=INTEGER},
            #{grade,jdbcType=NUMERIC},
            #{regDate,jdbcType=DATE}
        )
    </insert>

    <!-- 3. addUser03 : 동적 SQL -->
    <insert id="addUser03" parameterType="mybatis.service.domain.User">
        INSERT INTO users
        <trim prefix="(" suffix=")" suffixOverrides=",">
            user_id, user_name, password,
            <if test="age != null">age,</if>
            <if test="grade != null">grade,</if>
            <if test="regDate != null">reg_date,</if>
        </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
            #{userId},
            #{userName},
            #{password},
            <if test="age != null">#{age,jdbcType=INTEGER},</if>
            <if test="grade != null">#{grade,jdbcType=NUMERIC},</if>
            <if test="regDate != null">#{regDate,jdbcType=DATE},</if>
        </trim>
    </insert>

    <!-- 4. addUser04 : choose 로 NULL 직접 지정 -->
    <insert id="addUser04" parameterType="mybatis.service.domain.User">
        INSERT INTO users (user_id, user_name, password, age, grade, reg_date)
        VALUES (
            #{userId},
            #{userName},
            #{password},
            <choose>
                <when test="age != null">#{age,jdbcType=INTEGER}</when>
                <otherwise>NULL</otherwise>
            </choose>,
            <choose>
                <when test="grade != null">#{grade,jdbcType=NUMERIC}</when>
                <otherwise>NULL</otherwise>
            </choose>,
            <choose>
                <when test="regDate != null">#{regDate,jdbcType=DATE}</when>
                <otherwise>NULL</otherwise>
            </choose>
        )
    </insert>

</mapper>
